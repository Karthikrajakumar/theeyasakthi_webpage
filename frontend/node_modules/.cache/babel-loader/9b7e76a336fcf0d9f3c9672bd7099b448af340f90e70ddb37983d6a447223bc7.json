{"ast":null,"code":"var _jsxFileName = \"D:\\\\React.js\\\\theeyasakthi_webpage\\\\frontend\\\\src\\\\components\\\\WatchActions.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WatchActions({\n  itemId,\n  type,\n  // \"song\" | \"video\" | \"podcast\"\n  videoUrl\n}) {\n  _s();\n  const [reaction, setReaction] = useState(null);\n  const [openShare, setOpenShare] = useState(false);\n  const shareRef = useRef(null);\n\n  // Load reaction from DB\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_URL}/api/reactions/${type}/${itemId}`).then(res => res.json()).then(data => {\n      if (data !== null && data !== void 0 && data.reaction) setReaction(data.reaction);\n    });\n  }, [itemId, type]);\n  const sendReaction = value => {\n    const newValue = reaction === value ? null : value;\n    setReaction(newValue);\n    fetch(`${process.env.REACT_APP_API_URL}/api/reactions/${type}/${itemId}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        reaction: newValue\n      })\n    });\n  };\n\n  // Close share popup\n  useEffect(() => {\n    const handler = e => {\n      if (shareRef.current && !shareRef.current.contains(e.target)) {\n        setOpenShare(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handler);\n    return () => document.removeEventListener(\"mousedown\", handler);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-actions\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: `action-btn ${reaction === \"like\" ? \"active like\" : \"\"}`,\n      onClick: () => sendReaction(\"like\"),\n      children: \"\\uD83D\\uDC4D Like\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `action-btn ${reaction === \"dislike\" ? \"active dislike\" : \"\"}`,\n      onClick: () => sendReaction(\"dislike\"),\n      children: \"\\uD83D\\uDC4E Dislike\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"share-container\",\n      ref: shareRef,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"action-btn\",\n        onClick: () => setOpenShare(p => !p),\n        children: \"\\uD83D\\uDD17 Share\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), openShare && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"share-menu pro\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: `https://wa.me/?text=${encodeURIComponent(videoUrl)}`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"WhatsApp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `https://twitter.com/intent/tweet?url=${encodeURIComponent(videoUrl)}`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(videoUrl)}`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"Facebook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigator.clipboard.writeText(videoUrl),\n          children: \"Copy Link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(WatchActions, \"6dHG0sToDY/J2E3VD7A7PSqwZdQ=\");\n_c = WatchActions;\nvar _c;\n$RefreshReg$(_c, \"WatchActions\");","map":{"version":3,"names":["useEffect","useRef","useState","jsxDEV","_jsxDEV","WatchActions","itemId","type","videoUrl","_s","reaction","setReaction","openShare","setOpenShare","shareRef","fetch","process","env","REACT_APP_API_URL","then","res","json","data","sendReaction","value","newValue","method","headers","body","JSON","stringify","handler","e","current","contains","target","document","addEventListener","removeEventListener","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","p","href","encodeURIComponent","rel","navigator","clipboard","writeText","_c","$RefreshReg$"],"sources":["D:/React.js/theeyasakthi_webpage/frontend/src/components/WatchActions.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function WatchActions({\r\n  itemId,\r\n  type, // \"song\" | \"video\" | \"podcast\"\r\n  videoUrl,\r\n}) {\r\n  const [reaction, setReaction] = useState(null);\r\n  const [openShare, setOpenShare] = useState(false);\r\n  const shareRef = useRef(null);\r\n\r\n  // Load reaction from DB\r\n  useEffect(() => {\r\n    fetch(\r\n      `${process.env.REACT_APP_API_URL}/api/reactions/${type}/${itemId}`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data?.reaction) setReaction(data.reaction);\r\n      });\r\n  }, [itemId, type]);\r\n\r\n  const sendReaction = (value) => {\r\n    const newValue = reaction === value ? null : value;\r\n    setReaction(newValue);\r\n\r\n    fetch(\r\n      `${process.env.REACT_APP_API_URL}/api/reactions/${type}/${itemId}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ reaction: newValue }),\r\n      }\r\n    );\r\n  };\r\n\r\n  // Close share popup\r\n  useEffect(() => {\r\n    const handler = (e) => {\r\n      if (shareRef.current && !shareRef.current.contains(e.target)) {\r\n        setOpenShare(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handler);\r\n    return () => document.removeEventListener(\"mousedown\", handler);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"video-actions\">\r\n      <button\r\n        className={`action-btn ${reaction === \"like\" ? \"active like\" : \"\"}`}\r\n        onClick={() => sendReaction(\"like\")}\r\n      >\r\n        üëç Like\r\n      </button>\r\n\r\n      <button\r\n        className={`action-btn ${\r\n          reaction === \"dislike\" ? \"active dislike\" : \"\"\r\n        }`}\r\n        onClick={() => sendReaction(\"dislike\")}\r\n      >\r\n        üëé Dislike\r\n      </button>\r\n\r\n      <div className=\"share-container\" ref={shareRef}>\r\n        <button\r\n          className=\"action-btn\"\r\n          onClick={() => setOpenShare((p) => !p)}\r\n        >\r\n          üîó Share\r\n        </button>\r\n\r\n        {openShare && (\r\n          <div className=\"share-menu pro\">\r\n            <a\r\n              href={`https://wa.me/?text=${encodeURIComponent(videoUrl)}`}\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              WhatsApp\r\n            </a>\r\n            <a\r\n              href={`https://twitter.com/intent/tweet?url=${encodeURIComponent(\r\n                videoUrl\r\n              )}`}\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              X\r\n            </a>\r\n            <a\r\n              href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(\r\n                videoUrl\r\n              )}`}\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              Facebook\r\n            </a>\r\n            <button onClick={() => navigator.clipboard.writeText(videoUrl)}>\r\n              Copy Link\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}